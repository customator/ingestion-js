var callCW;
(function(){callCW=function(b){function n(a,c,d){var e="";d&&(e=new Date,e.setTime(e.getTime()+6E4*d),e="; expires="+e.toGMTString());document.cookie=a+"="+escape(c)+e+"; path=/"}function h(a){var c,d=a+"=",e=document.cookie.split(";");for(a=0;a<e.length;a++){for(c=e[a];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(d))return unescape(c.substring(d.length,c.length))}return null}function g(a,c,d){d=b.extend(!0,{},f.options.globalProperties,q(d,[a,c]));c={element:f.Transformations.elementToProperties(c,null)};
a={event:f.Transformations.eventToProperties(a)};return b.extend(!0,{},d,c,a)}function l(a,c,d){d=b.extend(!0,{},f.options.globalProperties,q(d,[a,c]));c={element:f.Transformations.formElementToProperties(c)};a={event:f.Transformations.eventToProperties(a)};return b.extend(!0,{},d,c,a)}function q(a,c){return"function"===typeof a?a.apply(window,c):a}var t={pageviewsEventName:"pageviews",inputChangeEventName:"input-changes",clicksEventName:"clicks",formSubmissionsEventName:"form-submissions",callbackTimeout:1E3,
globalProperties:{page_url:window.location.href,referrer_url:document.referrer}},f={options:t,addGlobalProperties:function(a){b.extend(f.options.globalProperties,a)},trackSession:function(a,c){"string"!==typeof a&&(a="common_web_guid");var d=h(a),e=h("customator_visit");genSub=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};d||(d="string"===typeof c?c:genSub()+genSub()+"-"+genSub()+"-"+genSub()+"-"+genSub()+"-"+genSub()+genSub()+genSub(),n(a,d,1051200));e||(e=genSub()+
genSub()+"-"+genSub()+"-"+genSub()+"-"+genSub()+"-"+genSub()+genSub()+genSub(),n("customator_visit",e,240));f.addGlobalProperties({visitorId:d,visitId:e})},trackPageview:function(a){a=b.extend(!0,{},f.options.globalProperties,q(a));f.Callback(f.options.pageviewsEventName,a)},trackClicks:function(a,c){"undefined"===typeof a&&(a=b("a"));b.each(a,function(a,e){b(e).on("click",function(a){var b=f.options.callbackTimeout,d=g(a,e,c),p=function(){};!e.href||"_blank"===e.target||a.metaKey||a.altKey||a.ctrlKey||
a.shiftKey||(p=function(){window.location.href=e.href},a.preventDefault(),setTimeout(function(){window.location.href=e.href},b));f.Callback(t.clicksEventName,d,p)})})},trackClicksPassive:function(a,c){b.each(a,function(a,e){b(e).on("click",function(a){a=g(a,e,c);f.Callback(t.clicksEventName,a)})})},trackFormSubmissions:function(a,c){"undefined"===typeof a&&(a=b("form"));b.each(a,function(a,e){var g=f.options.callbackTimeout,x=!1;b(e).on("submit",function(a){var b=l(a,e,c),d=function(){},d=function(){x||
(x=!0,e.submit())};a.preventDefault();setTimeout(function(){x=!0;e.submit()},g);f.Callback(t.formSubmissionsEventName,b,d)})})},trackInputChanges:function(a,c){"undefined"===typeof a&&(a=b("input, textarea, select"));b.each(a,function(a,e){var g=b(e).val();b(e).on("change",function(a){var d,p=g;d=b.extend(!0,{},f.options.globalProperties,q(c,[a,e]));var h={element:f.Transformations.inputElementToProperties(e)};p&&""!==p&&(h.element.previousValue=p);a={event:f.Transformations.eventToProperties(a)};
d=b.extend(!0,{},d,h,a);f.Callback(t.inputChangeEventName,d);g=b(e).val()})})},Transformations:{eventToProperties:function(a){var c={};c.timestamp=a.timestamp;c.type=a.type;c.metaKey=a.metaKey;return c},elementToProperties:function(a,c){var d=c||{};d.tagName=a.tagName;"A"===a.tagName&&(d.text=a.innerText);b(a.attributes).each(function(a,c){d[c.nodeName]=c.value});var e=b(a).attr("class");e&&(d.classes=e.split(/\s+/));d.path=b(a).getPath();return d},formElementToProperties:function(a){var c={};c.form_values=
b(a).serializeArray();return this.elementToProperties(a,c)},inputElementToProperties:function(a){var c={value:b(a).val()},d=b(a).closest("form");0<d.size()&&(c.form=this.elementToProperties(d[0]));return this.elementToProperties(a,c)}}};jQuery.fn.extend({getPath:function(a){"undefined"==typeof a&&(a="");if(this.is("html"))return"html"+a;var c=this.get(0).nodeName.toLowerCase(),d=this.attr("id"),b=this.attr("class");"undefined"!=typeof d&&(c+="#"+d);"undefined"!=typeof b&&(c+="."+b.split(/[\s\n]+/).join("."));
return this.parent().getPath(" > "+c+a)}});f.Keen={Client:null,Debug:!1,Callback:function(a,c,b){f.Keen.Client.addEvent(a,c,function(){f.Keen.Debug&&console.log(a+": "+JSON.stringify(c));b&&b()})},globalProperties:{keen:{addons:[{name:"keen:ip_to_geo",input:{ip:"ip_address"},output:"ip_geo_info"},{name:"keen:ua_parser",input:{ua_string:"user_agent"},output:"parsed_user_agent"},{name:"keen:url_parser",input:{url:"page_url"},output:"parsed_page_url"},{name:"keen:referrer_parser",input:{referrer_url:"referrer_url",
page_url:"page_url"},output:"referrer_info"}]},ip_address:"${keen.ip}",user_agent:"${keen.user_agent}"}};window.CommonWeb=f}})();
LazyLoad=function(b){function n(a,c){var d=b.createElement(a),e;for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e]);return d}function h(a){var b=c[a],f,g;b&&(f=b.callback,g=b.urls,g.shift(),d=0,g.length||(f&&f.call(b.context,b.obj),c[a]=null,e[a].length&&l(a)))}function g(){var a=navigator.userAgent;f={async:!0===b.createElement("script").async};(f.webkit=/AppleWebKit\//.test(a))||(f.ie=/MSIE|Trident/.test(a))||(f.opera=/Opera/.test(a))||(f.gecko=/Gecko\//.test(a))||(f.unknown=!0)}function l(d,
r,p,l,v){var A=function(){h(d)},w="css"===d,y=[],m,u,k,z;f||g();if(r)if(r="string"===typeof r?[r]:r.concat(),w||f.async||f.gecko||f.opera)e[d].push({urls:r,callback:p,obj:l,context:v});else for(m=0,u=r.length;m<u;++m)e[d].push({urls:[r[m]],callback:m===u-1?p:null,obj:l,context:v});if(!c[d]&&(z=c[d]=e[d].shift())){a||(a=b.head||b.getElementsByTagName("head")[0]);r=z.urls.concat();m=0;for(u=r.length;m<u;++m)p=r[m],w?k=f.gecko?n("style"):n("link",{href:p,rel:"stylesheet"}):(k=n("script",{src:p}),k.async=
!1),k.className="lazyload",k.setAttribute("charset","utf-8"),f.ie&&!w&&"onreadystatechange"in k&&!("draggable"in k)?k.onreadystatechange=function(){/loaded|complete/.test(k.readyState)&&(k.onreadystatechange=null,A())}:w&&(f.gecko||f.webkit)?f.webkit?(z.urls[m]=k.href,t()):(k.innerHTML='@import "'+p+'";',q(k)):k.onload=k.onerror=A,y.push(k);m=0;for(u=y.length;m<u;++m)a.appendChild(y[m])}}function q(a){var c;try{c=!!a.sheet.cssRules}catch(b){d+=1;200>d?setTimeout(function(){q(a)},50):c&&h("css");return}h("css")}
function t(){var a=c.css,b;if(a){for(b=v.length;0<=--b;)if(v[b].href===a.urls[0]){h("css");break}d+=1;a&&(200>d?setTimeout(t,50):h("css"))}}var f,a,c={},d=0,e={css:[],js:[]},v=b.styleSheets;return{css:function(a,c,b,d){l("css",a,c,b,d)},js:function(a,c,b,d){l("js",a,c,b,d)}}}(this.document);var httpRequest=new XMLHttpRequest;serialize=function(b,n){var h=[],g;for(g in b)if(b.hasOwnProperty(g)){var l=n?n+"["+g+"]":g,q=b[g];h.push("object"==typeof q?serialize(q,l):encodeURIComponent(l)+"="+encodeURIComponent(q))}return h.join("&")};
function relMouseCoords(b){var n=0,h=0,g=0,l=0,g=document.body;do n+=g.offsetLeft-g.scrollLeft,h+=g.offsetTop-g.scrollTop;while(g=g.offsetParent);g=b.pageX-n;l=b.pageY-h;return{x:g,y:l}}function applyPatches(){currentLocation=window.location.pathname;patches.hasOwnProperty(currentLocation)&&patches[currentLocation].forEach(function(b){(new Function(b))()})}
window.onload=function(){console.log("Customator Loaded");console.log(window.location.pathname);var b=[];window.jQuery||(console.log("No jQuery"),b.unshift("https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"));LazyLoad.js(b,function(){applyPatches();callCW(window.jQuery);CommonWeb.Callback=function(b,h,g){serialize(h);httpRequest.open("get","http://128.199.64.221:9880/customator.dev?json="+encodeURIComponent(JSON.stringify(h)),!0);httpRequest.send()};CommonWeb.addGlobalProperties({page_info:{viewport_width:$(window).width(),
viewport_height:$(window).height(),page_width:$(document).width(),page_height:$(document).height()}});CommonWeb.trackSession("customator_guid");CommonWeb.trackPageview(function(){return{event:{type:"page_view"}}});currentLocation=window.location.pathname;elements_to_track.hasOwnProperty(currentLocation)&&elements_to_track[currentLocation].forEach(function(b){CommonWeb.trackClicks($(b),function(b){mouse_coords=relMouseCoords(b);return{mouse_position:mouse_coords,time:{timestamp:(new Date).getTime()}}})});
CommonWeb.trackFormSubmissions()})};var patches={"/Customator/index.html":["$('#thelink').text('TEst 1');"],"/test":["$('<div>Test elements</div>').appendTo($('body'))"]},elements_to_track={"/Customator/index.html":["a","input"]};